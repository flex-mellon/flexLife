<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
            background: #f7f7f7;
            display: flex;
            flex-direction: column;
            height: 100vh;
            -webkit-tap-highlight-color: transparent;
        }
        main {
            flex: 1;
            overflow-y: auto;
            padding: 4vw;
            padding-bottom: 22vh; /* –º–µ—Å—Ç–æ –ø–æ–¥ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—é */
        }

        /* –°—á—ë—Ç—á–∏–∫ –∏ —É—Ä–æ–≤–µ–Ω—å */
        .counter-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 6vw;
            margin: 4vh 0;
        }
        .counter {
            font-size: 10vw;
            font-weight: bold;
        }
        .level-ring {
            position: relative;
            width: 20vw;
            height: 20vw;
            min-width: 70px;
            min-height: 70px;
        }
        .level-ring svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }
        .level-ring circle {
            fill: none;
            stroke-width: 8;
            r: 36;
            cx: 40;
            cy: 40;
        }
        .level-ring .bg { stroke: #eee; }
        .level-ring .progress {
            stroke: #4caf50;
            stroke-linecap: round;
        }
        .level-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
            font-size: 5vw;
            font-weight: bold;
        }

        /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .chips {
            display: flex;
            flex-wrap: wrap;
            gap: 3vw;
            justify-content: center;
            margin-bottom: 4vh;
        }
        .chip {
            padding: 1.5vh 3vw;
            border-radius: 20px;
            background: #ddd;
            cursor: pointer;
            font-size: 4vw;
            min-width: 18vw;
            text-align: center;
            user-select: none;
        }
        .chip.add { background: #4caf50; color: white; font-weight: bold; }
        .chip:active { background: #bbb; }

        /* –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ */
        .keyboard-container {
            position: fixed;
            bottom: 8vh; /* –Ω–∞–¥ –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π */
            left: 0; right: 0;
            background: #f7f7f7;
            padding: 1vh 3vw;
            border-top: 1px solid #ccc;
            display: none;
            z-index: 100;
        }
        .input-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1vh;
        }
        .input-display {
            flex: 1;
            background: #fff;
            border: 1px solid #ccc;
            padding: 1.5vh;
            font-size: 5vw;
            border-radius: 12px;
            margin-right: 2vw;
        }
        .confirm-btn {
            background: #4caf50;
            color: white;
            padding: 1.5vh 3vw;
            border-radius: 12px;
            font-size: 5vw;
            cursor: pointer;
        }
        .keyboard {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1vw;
        }
        .key {
            background: #fff;
            border: 1px solid #ccc;
            padding: 2.5vh 0;
            font-size: 5vw;
            text-align: center;
            cursor: pointer;
            border-radius: 10px;
            user-select: none;
        }
        .key:active { background: #eee; }

        /* –ò—Å—Ç–æ—Ä–∏—è */
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2vh;
        }
        .history, .weekly-list, .category-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .history li, .weekly-list li, .category-list li {
            background: #fff;
            margin: 1vh 0;
            padding: 2vh 3vw;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 4.5vw;
        }
        .record-actions button,
        .cat-actions button {
            font-size: 5vw;
            padding: 0.5vh 1.5vw;
            margin-left: 2vw;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        nav {
            position: fixed;
            bottom: 0; left: 0; right: 0;
            display: flex;
            border-top: 1px solid #ccc;
            height: 8vh;
            background: #eee;
            z-index: 101;
        }
        nav button {
            flex: 1;
            font-size: 6vw;
            border: none;
            background: transparent;
            cursor: pointer;
        }
        nav button.active { background: #ccc; }
    </style>
</head>
<body>

<main>
    <!-- –ì–ª–∞–≤–Ω–∞—è -->
    <div id="screen-main">
        <div class="counter-container">
            <div class="counter" id="counter">0</div>
            <div class="level-ring">
                <svg viewBox="0 0 80 80">
                    <circle class="bg" r="36" cx="40" cy="40"></circle>
                    <circle class="progress" r="36" cx="40" cy="40" stroke-dasharray="226" stroke-dashoffset="226"></circle>
                </svg>
                <div class="level-text" id="levelText">0</div>
            </div>
        </div>
        <div class="chips" id="categories">
            <div class="chip add" onclick="addCategoryPrompt()">+</div>
        </div>
    </div>

    <!-- –ò—Å—Ç–æ—Ä–∏—è -->
    <div id="screen-history" style="display:none;">
        <div class="history-header">
            <h3>–ò—Å—Ç–æ—Ä–∏—è</h3>
            <select id="sortSelect">
                <option value="desc">–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
                <option value="asc">–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</option>
            </select>
        </div>
        <ul class="history" id="historyList"></ul>
    </div>

    <!-- –ù–µ–¥–µ–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è -->
    <div id="screen-weekly" style="display:none;">
        <h3>–ù–µ–¥–µ–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è</h3>
        <ul class="weekly-list" id="weeklyList"></ul>
    </div>

    <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
    <div id="screen-categories" style="display:none;">
        <h3>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
        <button onclick="addCategoryPrompt()">+ –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
        <ul class="category-list" id="categoryList"></ul>
    </div>
</main>

<!-- –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ -->
<div class="keyboard-container" id="keyboardContainer">
    <div class="input-row">
        <div class="input-display" id="inputDisplay"></div>
        <div class="confirm-btn" id="confirmBtn">‚úì</div>
    </div>
    <div class="keyboard" id="keyboard"></div>
</div>

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<nav>
    <button id="btn-main" class="active">üè†</button>
    <button id="btn-history">üìú</button>
    <button id="btn-weekly">üìÖ</button>
    <button id="btn-categories">üóÇ</button>
</nav>

<script>
    /* –ó–¥–µ—Å—å –≤–µ—Å—å JS –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ (DB, checkDayChange, loadHistory, loadWeekly –∏ —Ç.–¥.)
       –º–µ–Ω—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ, —Ç–æ–ª—å–∫–æ CSS –æ–±–Ω–æ–≤–ª—ë–Ω */
</script>
</body>
</html>
